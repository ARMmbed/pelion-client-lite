@startuml

PROTOMAN_STATE_INIT: - All layers are initialzied
PROTOMAN_STATE_INIT: - Starts immediately after layer creation
PROTOMAN_STATE_INIT: - No data is moving
PROTOMAN_STATE_DISCONNECTED: - Layers are initialized but not connected
PROTOMAN_STATE_DISCONNECTED: - No data is moving
PROTOMAN_STATE_CONNECTING: - Layers are connected from bottom to up
PROTOMAN_STATE_CONNECTING: - Data is moving
PROTOMAN_STATE_CONNECTED: - Data is moving
PROTOMAN_STATE_DISCONNECTING: - Layers are disconnected from top to bottom
PROTOMAN_STATE_DISCONNECTING: - Data is moving
PROTOMAN_STATE_ERROR: - A layer is in unrecoverable state
PROTOMAN_STATE_ERROR: - The stack is in unrecoverable state

[*] --> PROTOMAN_STATE_INIT
PROTOMAN_STATE_INIT --> PROTOMAN_STATE_DISCONNECTED: All layers initialized
PROTOMAN_STATE_DISCONNECTED --> PROTOMAN_STATE_CONNECTING: protoman_connect();
PROTOMAN_STATE_CONNECTING --> PROTOMAN_STATE_CONNECTED
PROTOMAN_STATE_CONNECTED --> PROTOMAN_STATE_CONNECTING: re-connection
PROTOMAN_STATE_CONNECTED --> PROTOMAN_STATE_DISCONNECTING: protoman_disconnect();
PROTOMAN_STATE_DISCONNECTING --> PROTOMAN_STATE_DISCONNECTED

PROTOMAN_STATE_INIT          --> PROTOMAN_STATE_ERROR
PROTOMAN_STATE_CONNECTING    --> PROTOMAN_STATE_ERROR
PROTOMAN_STATE_CONNECTED     --> PROTOMAN_STATE_ERROR
PROTOMAN_STATE_DISCONNECTING --> PROTOMAN_STATE_ERROR
PROTOMAN_STATE_DISCONNECTED  --> PROTOMAN_STATE_ERROR

@enduml
